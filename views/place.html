<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Young WebMaster Camp</title>

  <!-- Bootstrap -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="css/isotope.css" media="screen" />
  <link rel="stylesheet" href="css/animate.css">
  <link rel="stylesheet" href="js/fancybox/jquery.fancybox.css" type="text/css" media="screen" />
  <link href="css/style.css" rel="stylesheet">
  <style>
  #map {
			height: 100%;
		}
    .pac-card {
			margin: 10px 10px 0 0;
			border-radius: 2px 0 0 2px;
			box-sizing: border-box;
			-moz-box-sizing: border-box;
			outline: none;
			box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
			background-color: #fff;
			font-family: Roboto;
		}

		.ui-autocomplete {
			z-index: 2150000000;
		}

		#pac-container {
			padding-bottom: 12px;
			margin-right: 12px;
		}

		.pac-controls {
			display: inline-block;
			padding: 5px 11px;
		}

		.pac-controls label {
			font-family: Roboto;
			font-size: 13px;
			font-weight: 300;
		}

		#pac-input {
			background-color: #fff;
			font-family: Roboto;
			font-size: 15px;
			font-weight: 300;
			margin-left: 12px;
			padding: 0 11px 0 13px;
			text-overflow: ellipsis;
			width: 400px;
		}

		#pac-input:focus {
			border-color: #4d90fe;
		}

  </style>
  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>
  <nav class="navbar navbar-default navbar-static-top" role="navigation">
      <div class="navigation">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse.collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

          </div>

          <div class="navbar-collapse collapse">
            <div class="menu">
              <ul class="nav nav-tabs" role="tablist">
                  <% if (!member) { %>
                <li role="presentation"><a href="/" class="active">Home</a></li>

                <li role="presentation"><a href="#" data-toggle="modal" data-target="#myModal">sign in</a></li>
                <li role="presentation"><a href="#" data-toggle="modal" data-target="#myModal2">sign up</a></li>
                <% } else{ %>
                  <li role="presentation"><a href="/" class="active">Home</a></li>
                  <li role="presentation"><a href="/place" class="active">place</a></li>
                  <li role="presentation"><a href="/apply">apply</a></li>
                  <li role="presentation"><a href="/signout">Sign Out</a></li>
                  <% } %>


              </ul>
            </div>
          </div>
        </div>
      </div>
    </nav>


<!-- sign in -->
  <div class="container">
    <!-- Modal -->
    <div class="modal fade" id="myModal" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title black">Log in</h4>

          </div>
          <div class="modal-body">
            <form method="post" action="/login" >
              <div class="form-group">

                <input type="text" class="form-control" id="email" placeholder="email" required autocomplete="off">

              </div>
              <div class="form-group">

                <input type="password" class="form-control" id="password" placeholder="password" required autocomplete="off">
              </div>


          </div>
          <div class="modal-footer">
             <div style="float: right; width: 130px padding-right:0; ">
            <button   type="submit"  formaction="/" class="btn btn-default">cancel</button>

          </div>
           <div style="float: right; width: 130px ">

            <!--<button onclick="signin()" class="btn btn-default" id="signin">sign in</button> -->
            <button type="submit" formaction="/signin" class="btn btn-default"  >sign in</button>
          </div>



            </form>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- sign in -->
    <div class="container">
      <!-- Modal -->
      <div class="modal fade" id="myModal2" role="dialog">
        <div class="modal-dialog">
          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title black">Log in</h4>

            </div>
            <div class="modal-body">
              <form method="post" action="/login" >
                <div class="form-group">

                  <input type="text" class="form-control" id="email" placeholder="email" required autocomplete="off">

                </div>
                <div class="form-group">

                  <input type="password" class="form-control" id="password" placeholder="password" required autocomplete="off">
                </div>


            </div>
            <div class="modal-footer">
               <div style="float: right; width: 130px padding-right:0; ">
              <button   type="submit"  formaction="/" class="btn btn-default">cancel</button>

            </div>
             <div style="float: right; width: 130px ">

              <!--<button onclick="signin()" class="btn btn-default" id="signin">sign in</button> -->
              <button type="submit" formaction="/signup" class="btn btn-default"  >sign up</button>
            </div>



              </form>
            </div>
          </div>
        </div>
      </div>
    </div>



  <div class="jumbotron ">
    <img src="img/img1.png" class="img-responsive center" />
    <h2> แผนที่</h2>
  </div>
<div class="jumbotron center">
  <div class="form-group">
  	<input id="pac-input" class="controls" type="text" placeholder="ค้นหา">
  		<div id="map" style="width:500px; height:400px;"></div>
  		</div>

  </div>








  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="js/jquery-2.1.1.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="js/bootstrap.min.js"></script>
  <script src="js/wow.min.js"></script>
  <script src="js/fancybox/jquery.fancybox.pack.js"></script>
  <script src="js/jquery.bxslider.min.js"></script>
  <script src="js/functions.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-growl/1.0.0/jquery.bootstrap-growl.min.js"></script>
  <script>

  //Google map
		var lat = 0;
		var lng = 0;

		function initAutocomplete() {
			var map = new google.maps.Map(document.getElementById('map'), {
				center: {
					lat: -33.8688,
					lng: 151.2195
				},
				zoom: 17,
				mapTypeControl: false,
				mapTypeId: 'roadmap'
			});

			var myLatLng = {
				lat: -25.363,
				lng: 131.044
			};

			var marker = new google.maps.Marker({
				position: myLatLng,
				map: map,
				title: 'Hello World!'
			});

			// Create the search box and link it to the UI element.
			var input = document.getElementById('pac-input');
			var searchBox = new google.maps.places.SearchBox(input);
			map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

			// Bias the SearchBox results towards current map's viewport.
			map.addListener('bounds_changed', function() {
				searchBox.setBounds(map.getBounds());
			});

			var infoWindow = new google.maps.InfoWindow;

			// Try HTML5 geolocation.
			if (navigator.geolocation) {
				navigator.geolocation.getCurrentPosition(function(position) {
					var pos = {
						lat: position.coords.latitude,
						lng: position.coords.longitude
					};

					infoWindow.setPosition(pos);
					infoWindow.setContent('ตำแหน่งของคุณ.');
					infoWindow.open(map);
					map.setCenter(pos);
				}, function() {
					handleLocationError(true, infoWindow, map.getCenter());
				});
			} else {
				// Browser doesn't support Geolocation
				handleLocationError(false, infoWindow, map.getCenter());
			}




			function handleLocationError(browserHasGeolocation, infoWindow, pos) {
				infoWindow.setPosition(pos);
				infoWindow.setContent(browserHasGeolocation ?
					'Error: The Geolocation service failed.' :
					'Error: Your browser doesn\'t support geolocation.');
				infoWindow.open(map);
			}


			map.addListener('center_changed', function() {
				// 3 seconds after the center of the map has changed, pan back to the
				// marker.
				var NewMapCenter = map.getCenter();
				lat = NewMapCenter.lat();
				lng = NewMapCenter.lng();
				marker.setPosition(NewMapCenter);

			});

			var markers = [];
			// Listen for the event fired when the user selects a prediction and retrieve
			// more details for that place.
			searchBox.addListener('places_changed', function() {
				var places = searchBox.getPlaces();

				if (places.length == 0) {
					return;
				}

				// Clear out the old markers.
				markers.forEach(function(marker) {
					marker.setMap(null);
				});
				markers = [];

				// For each place, get the icon, name and location.
				var bounds = new google.maps.LatLngBounds();
				places.forEach(function(place) {
					if (!place.geometry) {
						console.log("Returned place contains no geometry");
						return;
					}
					var icon = {
						url: place.icon,
						size: new google.maps.Size(71, 71),
						origin: new google.maps.Point(0, 0),
						anchor: new google.maps.Point(17, 34),
						scaledSize: new google.maps.Size(25, 25)
					};

					// Create a marker for each place.
					markers.push(new google.maps.Marker({
						map: map,
						icon: icon,
						title: place.name,
						position: place.geometry.location
					}));

					if (place.geometry.viewport) {
						// Only geocodes have viewport.
						bounds.union(place.geometry.viewport);
					} else {
						bounds.extend(place.geometry.location);
					}
				});
				map.fitBounds(bounds);
				var NewMapCenter = map.getCenter();
				lat = NewMapCenter.lat();
				lng = NewMapCenter.lng();
				marker.setPosition(NewMapCenter);
			});
		}







    wow = new WOW({

      })
      .init();
  </script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBGcdHbDli3zZWsQdZBoGEvIs9Ffmt2RUE&libraries=places&callback=initAutocomplete" async defer></script>
</body>

</html>
